
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "tips/download_hydroweb_next_products.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_tips_download_hydroweb_next_products.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_tips_download_hydroweb_next_products.py:


Download products from your `hydroweb.next project <https://hydroweb.next.theia-land.fr>`_ using `EODAG <https://github.com/CS-SI/eodag>`_
==========================================================================================================================================


Follow these steps: 
1. If not already done, install EODAG latest version using `pip install -U eodag` or `conda update eodag`
2. Generate an API-Key from hydroweb.next portal in your user settings
3. Carefully store your API-Key
 - either in your eodag configuration file (usually ~/.config/eodag/eodag.yml, automatically generated the first time you use eodag) in auth/credentials/apikey="PLEASE_CHANGE_ME"
 - or in an environment variable `export EODAG__HYDROWEB_NEXT__AUTH__CREDENTIALS__APIKEY="PLEASE_CHANGE_ME"`
4. You are all set, run this script `python download_New_project.py`

For more information, please refer to EODAG Documentation https://eodag.readthedocs.io

.. GENERATED FROM PYTHON SOURCE LINES 21-29

.. code-block:: default

    from eodag import EODataAccessGateway, SearchResult
    from eodag import setup_logging
    # sphinx_gallery_thumbnail_path = '_static/hydrowebnext.png'

    setup_logging(1)  # 0: nothing, 1: only progress bars, 2: INFO, 3: DEBUG

    dag = EODataAccessGateway()


.. GENERATED FROM PYTHON SOURCE LINES 30-31

Declare the path where the file will be downloaded

.. GENERATED FROM PYTHON SOURCE LINES 31-34

.. code-block:: default

    path_out = "/tmp"



.. GENERATED FROM PYTHON SOURCE LINES 35-41

Define your search criteria. It defines a list of query-arguments dictionnaries.
Each query-arguments dictionnary will be used to perform a distinct search, whose results will then be contatenated.
- add/remove collections using the `productType` key (one per query-arguments dictionnary)
- add time restrictions using the `start` and `end` keys (e.g. "start": "2020-05-01" , "end": "2020-05-10T00:00:00Z" with UTC ISO8601 format)(one per collection/dictionnary)
- add spatial restrictions using the `geom` key (e.g. "geom": "POLYGON ((1 43, 2 43, 2 44, 1 44, 1 43))" WKT string, a bounding-box list [lonmin, latmin, lonmax, latmax] can also be passed )(one per collection/dictionnary)
- more query arguments can be used, see `documentation <https://eodag.readthedocs.io/en/stable/notebooks/api_user_guide/4_search.html?#Search-parameters>`_

.. GENERATED FROM PYTHON SOURCE LINES 41-45

.. code-block:: default

    project_query_args = [
        {"productType":"SWOT_L2_HR_RASTER_250M_SAMPLE_V1_2","geom":"POLYGON ((-4.17 43.10,12.70 43.10,12.70 49.64,-4.17 49.64,-4.17 43.10))"}]
	


.. GENERATED FROM PYTHON SOURCE LINES 46-47

search for matching products in hydroweb.next STAC API catalog

.. GENERATED FROM PYTHON SOURCE LINES 47-51

.. code-block:: default

    project_search_results = SearchResult([])
    for query_args in project_query_args:	
        project_search_results.extend(dag.search_all(**query_args))


.. GENERATED FROM PYTHON SOURCE LINES 52-53

Download

.. GENERATED FROM PYTHON SOURCE LINES 53-57

.. code-block:: default

    downloaded_paths = dag.download_all(project_search_results, outputs_prefix=path_out)
    print(f"files succesfully downloaded in {downloaded_paths}")




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)


.. _sphx_glr_download_tips_download_hydroweb_next_products.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: download_hydroweb_next_products.py <download_hydroweb_next_products.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: download_hydroweb_next_products.ipynb <download_hydroweb_next_products.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
